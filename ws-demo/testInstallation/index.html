<!DOCTYPE html>
<html lang="en">

<head>
  <title>Test Installation</title>
  <meta charset="utf-8">
  <!-- <link rel="apple-touch-icon" sizes="180x180" href="stuff/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="stuff/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="stuff/favicon-16x16.png">
  <link rel="manifest" href="stuff/site.webmanifest">
  <link rel="mask-icon" href="stuff/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff"> -->
  <!-- <link rel="icon" href="icon128x128.ico" sizes="128x128"> -->
  <!-- <link rel="icon" href="icon64x64.ico" sizes="64x64"> -->
  <!-- <link rel="icon" href="icon48x48.ico" sizes="48x48"> -->
  <!-- <link rel="icon" href="icon32x32.ico" sizes="32x32"> -->
  <!-- <link rel="icon" href="icon16x16.ico" sizes="16x16"> -->
  <!-- <link rel="icon" href="favicon2.png" type="image/png" sizes="128x128"> -->
  <link rel="icon" href="favicon.png" type="image/png" sizes="64x64">
  <!-- <link rel="icon" href="data:image/png;base64,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" type="image/png" > -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
</head>

<body>

  <div class="jumbotron text-center">
    <h1>Chrome App</h1>
    <p>Run a command?</p>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-sm-4">
      </div>
      <div class="col-sm-4">
        <button class="btn btn-danger" onclick="runNoop()">Run Noop?</button>
      </div>
      <div class="col-sm-4">
        <button class="btn btn-danger" onclick="runCommand()">Run Command?</button>
      </div>

    </div>

  </div>

  <script>

    var ws;

    function runCommand() {
      console.log("run command.");
      ws.send(JSON.stringify({
        type: "COMMAND",
        executable: "test.bat",
        args: []
      }));
    }

    function runNoop() {
      console.log("run command.");
      ws.send(JSON.stringify({
        type: "NOOP"
      }));
    }

    (function () {
      // todo make this part dynamic...
      ws = new WebSocket(((window.location.protocol === "https:") ? "wss://" : "ws://") + window.location.host + "/ws");

      ws.onmessage = function (message) {
        console.log("received message", message);
      }
    })();
  </script>
</body>

</html>